<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form validation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div id="header">
            <h2>REGISTRATION FORM</h2>
        </div>
        <form action="" class="form" id="form">
            <div class="form-control">
                <label for="">Username</label>
                <input type="text" id="username" placeholder="Enter your name" autocomplete="off">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error msg</small>
            </div>
            <div class="form-control">
                <label for="">Email</label>
                <input type="email" name="" id="email" placeholder="Enter your email" autocomplete="off">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error msg</small>
            </div>
            <div class="form-control">
                <label for="">Phone Number</label>
                <input type="number" id="phone" placeholder="Enter your number" autocomplete="off">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error msg</small>
            </div>
            <div class="form-control">
                <label for="">Password</label>
                <input type="password" id="password" placeholder="Enter your password">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error msg</small>
            </div>
            <div class="form-control">
                <label for="">Confirm password</label>
                <input type="password" id="cnf-password" placeholder="Confirm password">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error msg</small>
            </div>
            <input type="submit" value="Submit" class="btn">
        </form>
    </div>
    <script type="text/javascript">
        const form= document.getElementById('form');
        const username= document.getElementById('username');
        const email= document.getElementById('email');
        const phone= document.getElementById('phone');
        const password= document.getElementById('password');
        const cnf = document.getElementById('cnf-password');
        
        // add event
        form.addEventListener("Submit",(event)=>{
            event.preventDefault();
            validate();
        });
        const isEmail=(emailVal)=>{
            var atSymbol= emailVal.indexOf("@");
            if(atSymbol<1) return false;
            var dot = emailVal.lastindexOf('.');
            if(dot <= atSymbol +2) return false;
            if(dot === emailVal.length - 1) return false;
            return true;
        }
        // define the validate function
        function validate(){
        const usernameVal = username.value.trim();
        const emailVal = email.value.trim();
        const phoneVal = phone.value.trim();
        const passwordVal= password.value.trim();
        const cnfVal = cnf.value.trim();

        // validate user name
        if(usernameVal === ""){
            setErrorMsg(username, 'username cannot be blank');
        }
        else if(usernameVal.length <= 2){
            setErrorMsg(usernameVal, 'username min 3 char');
        }
        else{
            setSuccessMsg(username);
        }

        // validate email
        if(emailVal === ""){
            setErrorMsg(email,'email cannot be blank');
        }
        else if(!isEmail(emailVal)){
            setErrorMsg(emailVal,"not a valid Email");
        }
        else{
            setSuccessMsg(email);
        }
        }
       function setErrorMsg(input, errormsgs){
           const formControl = input.parentElement;
           const small= formControl.querySelector('small');
           formControl.className = "form-control error";
           small.innerText=errormsgs;
       }
       function setSuccessMsg(input){
           const formControl = input.parentElement;
           formControl.className = "form-control success";

       }
    </script>
</body>
</html>